<html>
<head>
<title>Game of Life</title>
<style type="text/css">
#board {
    font-size:9px;
    position:relative;
    left:10px;
    top:10px;
}
body {
    overflow:hidden;
}
</style>
</head>
<body>
<div id="board"></div>
<script src="gol.js"></script>
<script>
    (function()
    {
        window.cgol = new CGOL();

        // randomise starting position.
        var startWith = 0,
            i
            ;
        for (i=0; i<startWith; i++) {
            var randX = Math.floor(Math.random()*(10+1))+5;
            var randY = Math.floor(Math.random()*(10+1))+5;
            var cell = cgol.switchOnCell(randX, randY);
        }
        cgol.step();
        var dom = CGOL.View.render(cgol);
        document.getElementById('board').innerHTML = '';
        document.getElementById('board').appendChild(dom);
    })();
</script>
<!-- test controls -->
<div style="position:absolute; right:20px; top:20px;">
x: <input type="text" id="x" value="5" />
        <input type="button" id="xPlus" value="+">
        <input type="button" id="xMin" value="-">
<br/>
y: <input type="text" id="y" value="5" />
        <input type="button" id="yPlus" value="+">
        <input type="button" id="yMin" value="-">
<br/>
<br/>
<textarea id="mod" style="width:400px; height:200px;">
if (neighbour==false) {
    mod = (y*w) + x;
}
else {
    mod = ((-1*x) + y) * w + x
    // mod = (1+y) * w + x;
}
</textarea>
<br/>
<input type="button" value="RUN" id="run" />
</div>
<script>
    var doHighlight = function()
    {
        window.cgol.reset();
        var x = document.getElementById('x').value,
            y = document.getElementById('y').value;
        window.cgol.highlightNeighbours(x,y);
        dom = CGOL.View.render(cgol);
        document.getElementById('board').innerHTML = '';
        document.getElementById('board').appendChild(dom);
    };
    document.getElementById('run').onclick = doHighlight;
    document.getElementById('xPlus').onclick = function()
    {
        document.getElementById('x').value = parseInt(document.getElementById('x').value, 10) + 1;
        doHighlight.call();
    };
    document.getElementById('xMin').onclick = function()
    {
        document.getElementById('x').value = parseInt(document.getElementById('x').value, 10) - 1;
        doHighlight.call();
    };
    document.getElementById('yPlus').onclick = function()
    {
        document.getElementById('y').value = parseInt(document.getElementById('y').value, 10) + 1;
        doHighlight.call();
    };
    document.getElementById('yMin').onclick = function()
    {
        document.getElementById('y').value = parseInt(document.getElementById('y').value, 10) - 1;
        doHighlight.call();
    };
    doHighlight.call();
</script>
</body>
</html>
